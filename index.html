<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="Now or Never">
<meta property="og:type" content="website">
<meta property="og:title" content="lishaowei">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="lishaowei">
<meta property="og:description" content="Now or Never">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="lishaowei">
<meta name="twitter:description" content="Now or Never">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>lishaowei</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lishaowei</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/11/2017_07_11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/11/2017_07_11/" itemprop="url">人工智能</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-11T11:34:49+08:00">
                2017-07-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/读书/" itemprop="url" rel="index">
                    <span itemprop="name">读书</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/11/2017_07_11/" class="leancloud_visitors" data-flag-title="人工智能">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="人工智能来了"><a href="#人工智能来了" class="headerlink" title="人工智能来了"></a>人工智能来了</h2><p>人工智能现在慢慢的覆盖了我们整个生活。吃饭，游玩，住宿，上网<br>人工智能充斥在我们生活的每个角落。<br>说实话，人工智能给我们生活带来了很多，很大的便捷。是我们的生活更”科学”，更”智能”。<br>但是人工智能来了，是否所有人都做好准备了？</p>
<p>人工智能的出现，在很大一部分上减轻了人类工作的繁重度。<br>比如说，现在最常见的人工智能编辑。<br>通过在网上上收集到的数据和信息，它可以很快很好的写出一篇新闻稿。并且发送到门户网站上。</p>
<p>如果说，人工智能机器人达到了文章错落有致，内容丰富多彩。<br>那么，真正的撰稿人是不是要下岗了。不知道撰稿人有没有心头一紧。</p>
<p>再比如。 我半夜三更的时候看nba夏季联赛。图文直播就是人工智能机器人。<br>它通过观看赛场上的球衣号码，获取到人员信息。<br>通过人员跑动来智能分析出战术，然后把这些一线信息分析给我们看直播的人。<br>它的出现的确分担了很多人类的工作，毕竟谁也不想熬夜去上班嘛！！</p>
<p>所以大胆的想象。未来十年，二十年。<br>人工智能将逐渐的替代掉人类的”基础性”工作岗位</p>
<h2 id="目前人工智能应用场景"><a href="#目前人工智能应用场景" class="headerlink" title="目前人工智能应用场景"></a>目前人工智能应用场景</h2><p>目前的人工智能已经应用在很多地方了<br>比如说 </p>
<ul>
<li>Apple的Siri ，在我没有女朋友的时候，siri都是我”谈心”的”对象”</li>
<li>Google的智能翻译， 这个炒鸡”屌。<br>比如说 现在在各种文本文献中，有英文和中文的翻译， 英文和阿拉伯文的翻译。<br>中文和阿拉伯文无法直接进行翻译。但是通过人工智能<br>它可以三者关系变的无比简单。 A==B==C，so easy</li>
<li>新闻撰稿和球赛直播</li>
<li>机器视觉分析 比如说 人脸识别，通过查看你的脸，就知道你是谁<br>但是我个人感觉有个bug，比如说拿了一张我的照片，通过人脸识别去登录我的支付宝。那我就亏大了 </li>
<li>自动驾驶 这个目前国内不可行，主要是因为我国人口多，闯红灯严重，女司机多<br>但是我对于自动驾驶有个大胆的想法，未来的所有车都是通过人工智能软件控制其速度，车距，放心。<br>人需要做的就是输入目的地就ok，世界上所有的车辆都共用一个数据库和数据分析。<br>通过智能分析，每个车都能判断于其他车和路况的信息，然后通过计算来制定车的速度和放心，<br>不用人去控制，整个系统都通过人工智能，各行其道。想想就美好。妈妈再也不用担心我碰见女司机了</li>
</ul>
<h2 id="关于人工智能的定义"><a href="#关于人工智能的定义" class="headerlink" title="关于人工智能的定义"></a>关于人工智能的定义</h2><p>未完待续 下午写</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/05/2017_07_05_1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/05/2017_07_05_1/" itemprop="url">Android 动态权限适配方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-05T10:31:00+08:00">
                2017-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/05/2017_07_05_1/" class="leancloud_visitors" data-flag-title="Android 动态权限适配方案">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>   Google官方在6.0版本上对于应用权限的调用作出了大大的修改。在6.0版本之前，应用App需要用到什么权限只需要在AndroidManifest.xml配置文件中增加相对应权限的配置，<br>   然后在App中就可以随便无限制的使用这些权限来访问用户的设备了。由于这种权限的漏洞，导致了大量的用户信息的泄露。所以在6.0版本上，Android官方团队重新修改了这个权限的申请方式。<br>   在新的权限模式之下，用户将能够根据自己的实际需要在运行时中对各项权限进行审核，且随时关闭其中的部分权限。</p>
<p>   在M版本中，android权限被分为了3大类，默认权限、签名权限和危险权限，其中默认权限和签名权限都为安装时权限，<br>   即只要在AndroidManifest.xml中配置，就可以在app运行时放心大胆的使用。但是对于危险权限，不仅要再AndroidManifest.xml中配置，<br>   还要在代码中动态去申请，因为这些权限不是默认就授予的，而是运行时去向用户申请的。</p>
<h2 id="危险权限"><a href="#危险权限" class="headerlink" title="危险权限"></a>危险权限</h2><p>​<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">group:android.permission-group.CONTACTS</div><div class="line">    permission:android.permission.WRITE_CONTACTS</div><div class="line">    permission:android.permission.GET_ACCOUNTS</div><div class="line">    permission:android.permission.READ_CONTACTS</div><div class="line">group:android.permission-group.PHONE</div><div class="line">    permission:android.permission.READ_CALL_LOG</div><div class="line">    permission:android.permission.READ_PHONE_STATE</div><div class="line">    permission:android.permission.CALL_PHONE</div><div class="line">    permission:android.permission.WRITE_CALL_LOG</div><div class="line">    permission:android.permission.USE_SIP</div><div class="line">    permission:android.permission.PROCESS_OUTGOING_CALLS</div><div class="line">    permission:com.android.voicemail.permission.ADD_VOICEMAIL</div><div class="line">group:android.permission-group.CALENDAR</div><div class="line">    permission:android.permission.READ_CALENDAR</div><div class="line">    permission:android.permission.WRITE_CALENDAR</div><div class="line">group:android.permission-group.CAMERA</div><div class="line">    permission:android.permission.CAMERA</div><div class="line">group:android.permission-group.SENSORS</div><div class="line">    permission:android.permission.BODY_SENSORS</div><div class="line">group:android.permission-group.LOCATION</div><div class="line">    permission:android.permission.ACCESS_FINE_LOCATION</div><div class="line">    permission:android.permission.ACCESS_COARSE_LOCATION</div><div class="line">group:android.permission-group.STORAGE</div><div class="line">    permission:android.permission.READ_EXTERNAL_STORAGE</div><div class="line">    permission:android.permission.WRITE_EXTERNAL_STORAGE</div><div class="line">group:android.permission-group.MICROPHONE</div><div class="line">    permission:android.permission.RECORD_AUDIO</div><div class="line">group:android.permission-group.SMS</div><div class="line">    permission:android.permission.READ_SMS</div><div class="line">    permission:android.permission.RECEIVE_WAP_PUSH</div><div class="line">    permission:android.permission.RECEIVE_MMS</div><div class="line">    permission:android.permission.RECEIVE_SMS</div><div class="line">    permission:android.permission.SEND_SMS</div><div class="line">    permission:android.permission.READ_CELL_BROADCASTS</div><div class="line">​</div></pre></td></tr></table></figure></p>
<h2 id="使用RxPermissions"><a href="#使用RxPermissions" class="headerlink" title="使用RxPermissions"></a>使用RxPermissions</h2><h3 id="Set-up"><a href="#Set-up" class="headerlink" title="Set up"></a>Set up</h3><p>To use this library your minSdkVersion must be &gt;= 11.</p>
<p>In your build.gradle :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">repositories &#123;</div><div class="line">    jcenter() // If not already there</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    compile &apos;com.tbruyelle.rxpermissions:rxpermissions:0.9.4@aar&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p>Create a RxPermissions instance :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RxPermissions rxPermissions = new RxPermissions(this); // where this is an Activity instance</div></pre></td></tr></table></figure></p>
<p>Example : request the CAMERA permission (with Retrolambda for brevity, but not required)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// Must be done during an initialization phase like onCreate</div><div class="line">rxPermissions</div><div class="line">    .request(Manifest.permission.CAMERA)</div><div class="line">    .subscribe(granted -&gt; &#123;</div><div class="line">        if (granted) &#123; // Always true pre-M</div><div class="line">           // I can control the camera now</div><div class="line">        &#125; else &#123;</div><div class="line">           // Oups permission denied</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>
<p>If you need to trigger the permission request from a specific event, you need to setup your event as an observable inside an initialization phase.</p>
<p>You can use JakeWharton/RxBinding to turn your view to an observable (not included in the library).</p>
<p>Example :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// Must be done during an initialization phase like onCreate</div><div class="line">RxView.clicks(findViewById(R.id.enableCamera))</div><div class="line">    .compose(rxPermissions.ensure(Manifest.permission.CAMERA))</div><div class="line">    .subscribe(granted -&gt; &#123;</div><div class="line">        // R.id.enableCamera has been clicked</div><div class="line">    &#125;);</div><div class="line">If multiple permissions at the same time, the result is combined :</div><div class="line"></div><div class="line">rxPermissions</div><div class="line">    .request(Manifest.permission.CAMERA,</div><div class="line">             Manifest.permission.READ_PHONE_STATE)</div><div class="line">    .subscribe(granted -&gt; &#123;</div><div class="line">        if (granted) &#123;</div><div class="line">           // All requested permissions are granted</div><div class="line">        &#125; else &#123;</div><div class="line">           // At least one permission is denied</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>
<p>You can also observe a detailed result with requestEach or ensureEach :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">rxPermissions</div><div class="line">    .requestEach(Manifest.permission.CAMERA,</div><div class="line">             Manifest.permission.READ_PHONE_STATE)</div><div class="line">    .subscribe(permission -&gt; &#123; // will emit 2 Permission objects</div><div class="line">        if (permission.granted) &#123;</div><div class="line">           // `permission.name` is granted !</div><div class="line">        &#125; else if (permission.shouldShowRequestPermissionRationale)</div><div class="line">           // Denied permission without ask never again</div><div class="line">        &#125; else &#123;</div><div class="line">           // Denied permission with ask never again</div><div class="line">           // Need to go to the settings</div><div class="line">        &#125;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/05/2017_07_05_2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/05/2017_07_05_2/" itemprop="url">用InteliJ IDEA 写一个适用于生成的mvp插件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-05T09:30:00+08:00">
                2017-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Idea插件/" itemprop="url" rel="index">
                    <span itemprop="name">Idea插件</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/05/2017_07_05_2/" class="leancloud_visitors" data-flag-title="用InteliJ IDEA 写一个适用于生成的mvp插件">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>现在大部分的框架都是 MVP + Dagger ，但是如果你自己去写所有的类的话，也要花费不少功夫<br>说不定dagger还会编译错误</p>
<p>so ，mvp插件应运而生</p>
<h2 id="创建一个Plugin项目"><a href="#创建一个Plugin项目" class="headerlink" title="创建一个Plugin项目"></a>创建一个Plugin项目</h2><p>  打开idea ，File-&gt;New-&gt;Project 然后选择一个plugin项目 。选择 intellij platfrom plugin </p>
<p>  点击Next，输入项目的名称即可，这里取名MvpCreate。</p>
<p>  项目目录下的 plugin.xml为项目的说明文件，会包含一些项目的版权、作者和声明。其中主要标签为<actions>，这里会是插件的入口。</actions></p>
<p>  src目录下存放主要的代码。</p>
<h2 id="创建一个菜单"><a href="#创建一个菜单" class="headerlink" title="创建一个菜单"></a>创建一个菜单</h2><p>  现在我们开始建一个自己的菜单，选择src-&gt;New-&gt;Action，<br>  <img src="/images/mvp_helper/11.png" width="900"><br>  然后填写这个Action的信息： 注意⚠️：这里我用的是command+n 在generate保存<br>  <img src="/images/mvp_helper/12.png" width="900"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">说明一下需要填写的属性：</div><div class="line"></div><div class="line">Action ID：代表这个Action的唯一标示。</div><div class="line"></div><div class="line">Class Name：类名</div><div class="line"></div><div class="line">Name：这个插件在菜单上的名称</div><div class="line"></div><div class="line">Description：关于这个插件的描述信息</div><div class="line"></div><div class="line">Groups：代表这个插件会出现的位置。比如想让这个插件出现在Code菜单下的第一次选项，我在图中选择CodeMenu（Code），右边Anchor选择First</div><div class="line"></div><div class="line">Keyboard Shortcuts：快捷键设置。图中设置Command+n</div></pre></td></tr></table></figure></p>
<p>同时看一下plugin.xml这个文件，会发现<actions>标签下多出来了一个<action>标签，里面包含了我们刚刚填写的信息。<br>eas<br>这样一个插件就生成了。把这个插件部署到studio已经可以使用，具体如何部署接下来会讲，继续往下看。</action></actions></p>
<h2 id="编写插件代码"><a href="#编写插件代码" class="headerlink" title="编写插件代码"></a>编写插件代码</h2><p>先说一下思路：</p>
<p>生成代码我们可以使用一些模板，这个模板可以是一个txt文件，在模板里面添加代码，提取出需要替换的代码，然后通过流读取模板文件，最后生成类文件。基本上就是这样的思路，接下来具体实现：</p>
<h3 id="新建模板文件"><a href="#新建模板文件" class="headerlink" title="新建模板文件"></a>新建模板文件</h3><p>我们按照官网的mvp风格来编写整体的框架，这里按功能模块分包，包含Activity、Fragment、Presenter、Contract，然后加上base类，BasePresenter、BaseView、BaseActivity、BaseFragment。看一下：<br><img src="/images/mvp_helper/1.png" width="800"></p>
<p>看一下TemplateContract.txt这个文件的内部细节：<br><img src="/images/mvp_helper/2.png" width="800"></p>
<p>代码里面的$packagename、$basepackagename、$author、$description、$date、$name这些字符都是可以动态替换的。这些模板文件的具体代码细节在文末的源码中查看，当然也可以根据自己的需要写入自己的代码。</p>
<h3 id="新建dialog"><a href="#新建dialog" class="headerlink" title="新建dialog"></a>新建dialog</h3><p>上面的模板已经建好，现在我们需要一个对话框，在对话框里面输入作者和模块的名字。效果看一下：<br><img src="/images/mvp_helper/3.png" width="300"></p>
<p>很简单的效果图，和创建Action一样，Dialog可以直接在src下右键New-&gt;Dialog取名MyDialog，然后会在src目录下生生成一个MyDialog.java和MyDialog.form的文件，点击这个MyDialog.form文件会进入一个可视化界面，通过拖拽就可以实现一个用户界面：<br><img src="/images/mvp_helper/4.png" width="800"></p>
<p>然后看一下MyDialog.java这个类的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">import javax.swing.*;</div><div class="line">import java.awt.event.*;</div><div class="line"></div><div class="line">public class MyDialog extends JDialog &#123;</div><div class="line">    private JPanel contentPane;</div><div class="line">    private JButton buttonOK;</div><div class="line">    private JButton buttonCancel;</div><div class="line">    private JTextField textField1;</div><div class="line">    private JTextField textField2;</div><div class="line"></div><div class="line">    private DialogCallBack mCallBack;</div><div class="line"></div><div class="line">    public MyDialog(DialogCallBack callBack) &#123;</div><div class="line">        this.mCallBack = callBack;</div><div class="line">        setTitle(&quot;Mvp Create Helper&quot;);</div><div class="line">        setContentPane(contentPane);</div><div class="line">        setModal(true);</div><div class="line">        getRootPane().setDefaultButton(buttonOK);</div><div class="line">        setSize(300, 150);</div><div class="line">        setLocationRelativeTo(null);</div><div class="line">        buttonOK.addActionListener(new ActionListener() &#123;</div><div class="line">            public void actionPerformed(ActionEvent e) &#123;</div><div class="line">                onOK();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        buttonCancel.addActionListener(new ActionListener() &#123;</div><div class="line">            public void actionPerformed(ActionEvent e) &#123;</div><div class="line">                onCancel();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        // call onCancel() when cross is clicked</div><div class="line">        setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);</div><div class="line">        addWindowListener(new WindowAdapter() &#123;</div><div class="line">            public void windowClosing(WindowEvent e) &#123;</div><div class="line">                onCancel();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        // call onCancel() on ESCAPE</div><div class="line">        contentPane.registerKeyboardAction(new ActionListener() &#123;</div><div class="line">            public void actionPerformed(ActionEvent e) &#123;</div><div class="line">                onCancel();</div><div class="line">            &#125;</div><div class="line">        &#125;, KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void onOK() &#123;</div><div class="line">        // add your code here</div><div class="line">        if (null != mCallBack)&#123;</div><div class="line">            mCallBack.ok(textField1.getText().trim(), textField2.getText().trim());</div><div class="line">        &#125;</div><div class="line">        dispose();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void onCancel() &#123;</div><div class="line">        // add your code here if necessary</div><div class="line">        dispose();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    public interface DialogCallBack&#123;</div><div class="line">        void ok(String author, String moduleName);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="生成代码实现"><a href="#生成代码实现" class="headerlink" title="生成代码实现"></a>生成代码实现</h3><p>好了现在去看看MvpCreateAction这个类的具体实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div></pre></td><td class="code"><pre><div class="line">import com.intellij.openapi.actionSystem.AnAction;</div><div class="line">import com.intellij.openapi.actionSystem.AnActionEvent;</div><div class="line">import com.intellij.openapi.actionSystem.PlatformDataKeys;</div><div class="line">import com.intellij.openapi.project.Project;</div><div class="line">import com.intellij.openapi.ui.Messages;</div><div class="line">import org.w3c.dom.Document;</div><div class="line">import org.w3c.dom.Element;</div><div class="line">import org.w3c.dom.Node;</div><div class="line">import org.w3c.dom.NodeList;</div><div class="line"></div><div class="line">import javax.xml.parsers.DocumentBuilder;</div><div class="line">import javax.xml.parsers.DocumentBuilderFactory;</div><div class="line">import java.io.*;</div><div class="line">import java.text.SimpleDateFormat;</div><div class="line">import java.util.Date;</div><div class="line"></div><div class="line">public class MvpCreateAction extends AnAction &#123;</div><div class="line"></div><div class="line">    private Project project;</div><div class="line">    //包名</div><div class="line">    private String packageName = &quot;&quot;;</div><div class="line">    private String mAuthor;//作者</div><div class="line">    private String mModuleName;//模块名称</div><div class="line"></div><div class="line">    private enum  CodeType &#123;</div><div class="line">        Activity, Fragment, Contract, Presenter, BaseView, BasePresenter, MvpBaseActivity, MvpBaseFragment</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void actionPerformed(AnActionEvent e) &#123;</div><div class="line">        project = e.getData(PlatformDataKeys.PROJECT);</div><div class="line">        packageName = getPackageName();</div><div class="line">        init();</div><div class="line">        refreshProject(e);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 刷新项目</div><div class="line">     * @param e</div><div class="line">     */</div><div class="line">    private void refreshProject(AnActionEvent e) &#123;</div><div class="line">        e.getProject().getBaseDir().refresh(false, true);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 初始化Dialog</div><div class="line">     */</div><div class="line">    private void init()&#123;</div><div class="line">        MyDialog myDialog = new MyDialog(new MyDialog.DialogCallBack() &#123;</div><div class="line">            @Override</div><div class="line">            public void ok(String author, String moduleName) &#123;</div><div class="line">                mAuthor = author;</div><div class="line">                mModuleName = moduleName;</div><div class="line">                createClassFiles();</div><div class="line">                Messages.showInfoMessage(project,&quot;create mvp code success&quot;,&quot;title&quot;);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        myDialog.setVisible(true);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 生成类文件</div><div class="line">     */</div><div class="line">    private void createClassFiles() &#123;</div><div class="line">        createClassFile(CodeType.Activity);</div><div class="line">        createClassFile(CodeType.Fragment);</div><div class="line">        createClassFile(CodeType.Contract);</div><div class="line">        createClassFile(CodeType.Presenter);</div><div class="line">        createBaseClassFile(CodeType.BaseView);</div><div class="line">        createBaseClassFile(CodeType.BasePresenter);</div><div class="line">        createBaseClassFile(CodeType.MvpBaseActivity);</div><div class="line">        createBaseClassFile(CodeType.MvpBaseFragment);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 生成base类</div><div class="line">     * @param codeType</div><div class="line">     */</div><div class="line">    private void createBaseClassFile(CodeType codeType) &#123;</div><div class="line">        String fileName = &quot;&quot;;</div><div class="line">        String content = &quot;&quot;;</div><div class="line">        String basePath = getAppPath() + &quot;base/&quot;;</div><div class="line">        switch (codeType)&#123;</div><div class="line">            case BaseView:</div><div class="line">                if (!new File(basePath + &quot;BaseView.java&quot;).exists())&#123;</div><div class="line">                    fileName = &quot;TemplateBaseView.txt&quot;;</div><div class="line">                    content = ReadTemplateFile(fileName);</div><div class="line">                    content = dealTemplateContent(content);</div><div class="line">                    writeToFile(content, basePath, &quot;BaseView.java&quot;);</div><div class="line">                &#125;</div><div class="line">                break;</div><div class="line">            case BasePresenter:</div><div class="line">                if (!new File(basePath + &quot;BasePresenter.java&quot;).exists())&#123;</div><div class="line">                    fileName = &quot;TemplateBasePresenter.txt&quot;;</div><div class="line">                    content = ReadTemplateFile(fileName);</div><div class="line">                    content = dealTemplateContent(content);</div><div class="line">                    writeToFile(content, basePath, &quot;BasePresenter.java&quot;);</div><div class="line">                &#125;</div><div class="line">                break;</div><div class="line">            case MvpBaseActivity:</div><div class="line">                if (!new File(basePath + &quot;MvpBaseActivity.java&quot;).exists())&#123;</div><div class="line">                    fileName = &quot;TemplateMvpBaseActivity.txt&quot;;</div><div class="line">                    content = ReadTemplateFile(fileName);</div><div class="line">                    content = dealTemplateContent(content);</div><div class="line">                    writeToFile(content, basePath, &quot;MvpBaseActivity.java&quot;);</div><div class="line">                &#125;</div><div class="line">                break;</div><div class="line">            case MvpBaseFragment:</div><div class="line">                if (!new File(basePath + &quot;MvpBaseFragment.java&quot;).exists())&#123;</div><div class="line">                    fileName = &quot;TemplateMvpBaseFragment.txt&quot;;</div><div class="line">                    content = ReadTemplateFile(fileName);</div><div class="line">                    content = dealTemplateContent(content);</div><div class="line">                    writeToFile(content, basePath, &quot;MvpBaseFragment.java&quot;);</div><div class="line">                &#125;</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 生成mvp框架代码</div><div class="line">     * @param codeType</div><div class="line">     */</div><div class="line">    private void createClassFile(CodeType codeType) &#123;</div><div class="line">        String fileName = &quot;&quot;;</div><div class="line">        String content = &quot;&quot;;</div><div class="line">        String appPath = getAppPath();</div><div class="line">        switch (codeType)&#123;</div><div class="line">            case Activity:</div><div class="line">                fileName = &quot;TemplateActivity.txt&quot;;</div><div class="line">                content = ReadTemplateFile(fileName);</div><div class="line">                content = dealTemplateContent(content);</div><div class="line">                writeToFile(content, appPath + mModuleName.toLowerCase(), mModuleName + &quot;Activity.java&quot;);</div><div class="line">                break;</div><div class="line">            case Fragment:</div><div class="line">                fileName = &quot;TemplateFragment.txt&quot;;</div><div class="line">                content = ReadTemplateFile(fileName);</div><div class="line">                content = dealTemplateContent(content);</div><div class="line">                writeToFile(content, appPath + mModuleName.toLowerCase(), mModuleName + &quot;Fragment.java&quot;);</div><div class="line">                break;</div><div class="line">            case Contract:</div><div class="line">                fileName = &quot;TemplateContract.txt&quot;;</div><div class="line">                content = ReadTemplateFile(fileName);</div><div class="line">                content = dealTemplateContent(content);</div><div class="line">                writeToFile(content, appPath + mModuleName.toLowerCase(), mModuleName + &quot;Contract.java&quot;);</div><div class="line">                break;</div><div class="line">            case Presenter:</div><div class="line">                fileName = &quot;TemplatePresenter.txt&quot;;</div><div class="line">                content = ReadTemplateFile(fileName);</div><div class="line">                content = dealTemplateContent(content);</div><div class="line">                writeToFile(content, appPath + mModuleName.toLowerCase(), mModuleName + &quot;Presenter.java&quot;);</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取包名文件路径</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    private String getAppPath()&#123;</div><div class="line">        String packagePath = packageName.replace(&quot;.&quot;, &quot;/&quot;);</div><div class="line">        String appPath = project.getBasePath() + &quot;/App/src/main/java/&quot; + packagePath + &quot;/&quot;;</div><div class="line">        return appPath;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 替换模板中字符</div><div class="line">     * @param content</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    private String dealTemplateContent(String content) &#123;</div><div class="line">        content = content.replace(&quot;$name&quot;, mModuleName);</div><div class="line">        if (content.contains(&quot;$packagename&quot;))&#123;</div><div class="line">            content = content.replace(&quot;$packagename&quot;, packageName + &quot;.&quot; + mModuleName.toLowerCase());</div><div class="line">        &#125;</div><div class="line">        if (content.contains(&quot;$basepackagename&quot;))&#123;</div><div class="line">            content = content.replace(&quot;$basepackagename&quot;, packageName + &quot;.base&quot;);</div><div class="line">        &#125;</div><div class="line">        content = content.replace(&quot;$author&quot;, mAuthor);</div><div class="line">        content = content.replace(&quot;$date&quot;, getDate());</div><div class="line">        return content;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取当前时间</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String getDate() &#123;</div><div class="line">        Date currentTime = new Date();</div><div class="line">        SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy/MM/dd&quot;);</div><div class="line">        String dateString = formatter.format(currentTime);</div><div class="line">        return dateString;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    /**</div><div class="line">     * 读取模板文件中的字符内容</div><div class="line">     * @param fileName 模板文件名</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    private String ReadTemplateFile(String fileName) &#123;</div><div class="line">        InputStream in = null;</div><div class="line">        in = this.getClass().getResourceAsStream(&quot;/Template/&quot; + fileName);</div><div class="line">        String content = &quot;&quot;;</div><div class="line">        try &#123;</div><div class="line">            content = new String(readStream(in));</div><div class="line">        &#125; catch (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return content;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    private byte[] readStream(InputStream inputStream) throws IOException &#123;</div><div class="line">        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();</div><div class="line">        byte[] buffer = new byte[1024];</div><div class="line">        int len = -1;</div><div class="line">        try &#123;</div><div class="line">            while ((len = inputStream.read(buffer)) != -1)&#123;</div><div class="line">                outputStream.write(buffer, 0, len);</div><div class="line">            &#125;</div><div class="line">        &#125; catch (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;finally &#123;</div><div class="line">            outputStream.close();</div><div class="line">            inputStream.close();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return outputStream.toByteArray();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    /**</div><div class="line">     * 生成</div><div class="line">     * @param content 类中的内容</div><div class="line">     * @param classPath 类文件路径</div><div class="line">     * @param className 类文件名称</div><div class="line">     */</div><div class="line">    private void writeToFile(String content, String classPath, String className) &#123;</div><div class="line">        try &#123;</div><div class="line">            File floder = new File(classPath);</div><div class="line">            if (!floder.exists())&#123;</div><div class="line">                floder.mkdirs();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            File file = new File(classPath + &quot;/&quot; + className);</div><div class="line">            if (!file.exists()) &#123;</div><div class="line">                file.createNewFile();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            FileWriter fw = new FileWriter(file.getAbsoluteFile());</div><div class="line">            BufferedWriter bw = new BufferedWriter(fw);</div><div class="line">            bw.write(content);</div><div class="line">            bw.close();</div><div class="line">        &#125; catch (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 从AndroidManifest.xml文件中获取当前app的包名</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    private String getPackageName() &#123;</div><div class="line">        String package_name = &quot;&quot;;</div><div class="line">        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();</div><div class="line">        try &#123;</div><div class="line">            DocumentBuilder db = dbf.newDocumentBuilder();</div><div class="line">            Document doc = db.parse(project.getBasePath() + &quot;/App/src/main/AndroidManifest.xml&quot;);</div><div class="line"></div><div class="line">            NodeList nodeList = doc.getElementsByTagName(&quot;manifest&quot;);</div><div class="line">            for (int i = 0; i &lt; nodeList.getLength(); i++)&#123;</div><div class="line">                Node node = nodeList.item(i);</div><div class="line">                Element element = (Element) node;</div><div class="line">                package_name = element.getAttribute(&quot;package&quot;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return package_name;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>说明一下，首先会获取包名，然后读取模板文件，替换模板文件中动态字符，在Dialog输入的作者和模块名称也会替换模板中字符，最后通过包名路径生成类文件，这是上面代码的一个简述，具体看代码吧。这样一个mvp框架代码生成插件已经完成，接下来看一下如何部署。</p>
<h2 id="部署插件"><a href="#部署插件" class="headerlink" title="部署插件"></a>部署插件</h2><h3 id="填写插件信息"><a href="#填写插件信息" class="headerlink" title="填写插件信息"></a>填写插件信息</h3><p>找到plugin.xml文件，填入一些基本信息，如下图：<br><img src="/images/mvp_helper/5.png" width="700"></p>
<p>填写一些插件的信息，像name、version、description…等等，填写的这些信息会在安装插件时，看到它的简介。</p>
<p>然后点击Build-&gt;Prepare Plugin Module …… 如图：<br><img src="/images/mvp_helper/6.png" width="700"></p>
<p>会在项目的根目录生成一个jar包：<br><img src="/images/mvp_helper/7.png" width="700"></p>
<p>拿到这个jar包就可以安装到Android Studio了。</p>
<h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>打开Android Studio，选择File-&gt;Setting-&gt;Plugins-&gt;Install plugin from disk，然后选择刚刚生成的jar包，如图：<br><img src="/images/mvp_helper/8.png" width="900"></p>
<p>安装好了以后重启Studio即可使用。</p>
<p>重启后可以看到在Code菜单下多了MvpHelper这个选项，点击或者快捷键Command+n调用。</p>
<p>现在调用这个插件去生成代码吧！</p>
<h3 id="上传到Plugins仓库"><a href="#上传到Plugins仓库" class="headerlink" title="上传到Plugins仓库"></a>上传到Plugins仓库</h3><p>如果你有个好的插件想要分享给你的小伙伴，但每次都要打成jar包发送给需要的人，然后对方需要Setting-&gt;Plugins-&gt;Install plugin from disk找到本地jar去安装使用。这样感觉太麻烦了，如果直接通过浏览Plugins仓库安装多好。按照下面步骤就可以实现：</p>
<p>官方Plugins仓库地址：<a href="https://plugins.jetbrains.com/" target="_blank" rel="external">https://plugins.jetbrains.com/</a></p>
<p>找到plugin.xml文件把下面这段代码打开：</p>
<p>  <depends>com.intellij.modules.lang</depends><br>打开后代表在所有的插件仓库都可以搜到这个插件，即IntelliJ IDEA和Android Studio的仓库均可搜到，要不然只能在IntelliJ IDEA的仓库搜到。</p>
<p>修改完plugin.xml文件后，重新生成jar，然后在仓库官网注册用户，上传插件，填写插件信息，等待审核通过。这样就可以在插件仓库搜索到自己的插件了，如下图：</p>
<p><img src="/images/mvp_helper/9.png" width="900"></p>
<p>##、最后</p>
<p>到此本文结束，编写一个插件可以说就三步：</p>
<ol>
<li>下载IntelliJ IDEA，创建plugin项目；</li>
<li>代码实现；</li>
<li>生成jar包，部署插件；<br>步骤很简单，主要的是代码实现上比较麻烦，现在可以动脑去编写一些“偷懒”的插件吧。</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/10/2016_07_10_1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/10/2016_07_10_1/" itemprop="url">Git-Flow 使用总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-10T15:30:00+08:00">
                2016-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2016/07/10/2016_07_10_1/" class="leancloud_visitors" data-flag-title="Git-Flow 使用总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="git-flow"><a href="#git-flow" class="headerlink" title="git flow"></a>git flow</h2><p>今天做新需求，使用git-flow开个新功能分支。可不料，SourceTree闹不开心。一直报错 如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Fatal: Not a gitflow-enabled repo yet. Please run &apos;git flow init&apos; first.</div></pre></td></tr></table></figure></p>
<p>我的小乖乖， 你怎么出问题了呢。那我就去解决一下。</p>
<p>google了一下，原来是我git glow没有初始化。</p>
<p>然后我就去teminal中 去执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git flow init</div></pre></td></tr></table></figure>
<p>结果报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git: &apos;flow&apos; is not a git command. See &apos;git --help&apos;</div></pre></td></tr></table></figure></p>
<p>好了，原来是我新电脑没有装git flow</p>
<h2 id="如何配置"><a href="#如何配置" class="headerlink" title="如何配置"></a>如何配置</h2><p>使用brew下载<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install git-flow</div></pre></td></tr></table></figure></p>
<p>下载好之后 初始化<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git flow init -f</div></pre></td></tr></table></figure></p>
<p>然后就会让你搭建git分支架构，按照默认即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Which branch should be used for bringing forth production releases?</div><div class="line">   - develop</div><div class="line">   - master</div><div class="line">   - release/9.2.3</div><div class="line">   - remote</div><div class="line">Branch name for production releases: [master]  </div><div class="line"></div><div class="line">Which branch should be used for integration of the &quot;next release&quot;?</div><div class="line">   - develop</div><div class="line">   - release/9.2.3</div><div class="line">   - remote</div><div class="line">Branch name for &quot;next release&quot; development: [develop] </div><div class="line"></div><div class="line">How to name your supporting branch prefixes?</div><div class="line">Feature branches? [feature/] </div><div class="line">Release branches? [release/] </div><div class="line">Hotfix branches? [hotfix/] </div><div class="line">Support branches? [support/] </div><div class="line">Version tag prefix? []</div></pre></td></tr></table></figure></p>
<h2 id="git-flow流程图"><a href="#git-flow流程图" class="headerlink" title="git flow流程图"></a>git flow流程图</h2><p><img src="/images/mvp_helper/o_git-flow-nvie.png" width="800"></p>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><h3 id="新功能开发"><a href="#新功能开发" class="headerlink" title="新功能开发"></a>新功能开发</h3><h4 id="基于develop，开启新功能分支开发"><a href="#基于develop，开启新功能分支开发" class="headerlink" title="基于develop，开启新功能分支开发"></a>基于develop，开启新功能分支开发</h4><p>完成前面构建操作，当前所在分支就变成 develop. 任何开发都必须从 develop 开始：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git flow feature start feature-name</div></pre></td></tr></table></figure></p>
<p>git-flow 从 develop 分支创建了一个新的分支 feature/feature-name，并自动切换到这个分支下面。然后就可以进行 feature-name 功能开发，中间可以多次的 commit 操作。</p>
<p>将一个 f1 分支推到远程服务器，与其他开发人员协同开发：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">➜ git flow feature publish f1</div><div class="line"></div><div class="line">或者</div><div class="line"></div><div class="line">➜ git push origin feature/f1</div></pre></td></tr></table></figure></p>
<h4 id="基于develop，开启新功能分支开发-1"><a href="#基于develop，开启新功能分支开发-1" class="headerlink" title="基于develop，开启新功能分支开发"></a>基于develop，开启新功能分支开发</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">➜ ➜ git flow feature finish f1</div></pre></td></tr></table></figure>
<p>feature/f1 分支的代码会被合并到 develop 里面，然后删除该分支，切换回 develop. 到此，新功能开发这个场景完毕。在 f1 功能开发中，如果 f1 未完成，同时功能 f2 要开始进行，也是可以的。</p>
<h3 id="发布上线"><a href="#发布上线" class="headerlink" title="发布上线"></a>发布上线</h3><h4 id="基于develop，开发发布分支"><a href="#基于develop，开发发布分支" class="headerlink" title="基于develop，开发发布分支"></a>基于develop，开发发布分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> git flow release start 0.1</div><div class="line">Switched to a new branch &apos;release/0.1&apos;</div><div class="line"></div><div class="line">Summary of actions:</div><div class="line">- A new branch &apos;release/0.1&apos; was created, based on &apos;develop&apos;</div><div class="line">- You are now on branch &apos;release/0.1&apos;</div><div class="line"></div><div class="line">Follow-up actions:</div><div class="line">- Bump the version number now!</div><div class="line">- Start committing last-minute fixes in preparing your release</div><div class="line">- When done, run:</div><div class="line"></div><div class="line">git flow release finish &apos;0.1&apos;</div></pre></td></tr></table></figure>
<h4 id="git-flow-从-develop-分支创建一个新的分支-release-0-1，并切换到该分支下，接下来要做的就是修改版本号等发布操作。完成后："><a href="#git-flow-从-develop-分支创建一个新的分支-release-0-1，并切换到该分支下，接下来要做的就是修改版本号等发布操作。完成后：" class="headerlink" title="git-flow 从 develop 分支创建一个新的分支 release/0.1，并切换到该分支下，接下来要做的就是修改版本号等发布操作。完成后："></a>git-flow 从 develop 分支创建一个新的分支 release/0.1，并切换到该分支下，接下来要做的就是修改版本号等发布操作。完成后：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> git flow release finish 0.1</div><div class="line">Switched to branch &apos;master&apos;</div><div class="line">Merge made by the &apos;recursive&apos; strategy.</div><div class="line">f1      |    1 +</div><div class="line">version |    1 +</div><div class="line">2 files changed, 2 insertions(+)</div><div class="line">create mode 100644 f1</div><div class="line">create mode 100644 version</div><div class="line">Switched to branch &apos;develop&apos;</div><div class="line">Merge made by the &apos;recursive&apos; strategy.</div><div class="line">version |    1 +</div><div class="line">1 file changed, 1 insertion(+)</div><div class="line">create mode 100644 version</div><div class="line">Deleted branch release/0.1 (was d77df80).</div><div class="line"></div><div class="line">Summary of actions:</div><div class="line">- Latest objects have been fetched from &apos;origin&apos;</div><div class="line">- Release branch has been merged into &apos;master&apos;</div><div class="line">- The release was tagged &apos;0.1&apos;</div><div class="line">- Release branch has been back-merged into &apos;develop&apos;</div><div class="line">- Release branch &apos;release/0.1&apos; has been deleted</div></pre></td></tr></table></figure>
<h4 id="打标签"><a href="#打标签" class="headerlink" title="打标签"></a>打标签</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> git:(master) git tag</div><div class="line">0.1</div><div class="line">0.2</div></pre></td></tr></table></figure>
<h3 id="线上出bug了-holy-s-t"><a href="#线上出bug了-holy-s-t" class="headerlink" title="线上出bug了 holy s**t"></a>线上出bug了 holy s**t</h3><h4 id="基于master，开启热修复分支"><a href="#基于master，开启热修复分支" class="headerlink" title="基于master，开启热修复分支"></a>基于master，开启热修复分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> git flow hotfix start bug1</div><div class="line">Switched to a new branch &apos;hotfix/bug1&apos;</div><div class="line"></div><div class="line">Summary of actions:</div><div class="line">- A new branch &apos;hotfix/bug1&apos; was created, based on &apos;master&apos;</div><div class="line">- You are now on branch &apos;hotfix/bug1&apos;</div><div class="line"></div><div class="line">Follow-up actions:</div><div class="line">- Bump the version number now!</div><div class="line">- Start committing your hot fixes</div><div class="line">- When done, run:</div><div class="line"></div><div class="line">git flow hotfix finish &apos;bug1&apos;</div></pre></td></tr></table></figure>
<h4 id="git-flow-从-master-分支创建一个新的分支-hotfix-bug1，并切换到该分支下。接下来要做的就是修复-bug，完成后："><a href="#git-flow-从-master-分支创建一个新的分支-hotfix-bug1，并切换到该分支下。接下来要做的就是修复-bug，完成后：" class="headerlink" title="git-flow 从 master 分支创建一个新的分支 hotfix/bug1，并切换到该分支下。接下来要做的就是修复 bug，完成后："></a>git-flow 从 master 分支创建一个新的分支 hotfix/bug1，并切换到该分支下。接下来要做的就是修复 bug，完成后：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">➜ git flow hotfix finish bug1</div><div class="line">   Switched to branch &apos;master&apos;</div><div class="line">   Merge made by the &apos;recursive&apos; strategy.</div><div class="line">   f1 |    2 +-</div><div class="line">   1 file changed, 1 insertion(+), 1 deletion(-)</div><div class="line">   Switched to branch &apos;develop&apos;</div><div class="line">   Merge made by the &apos;recursive&apos; strategy.</div><div class="line">   f1 |    2 +-</div><div class="line">   1 file changed, 1 insertion(+), 1 deletion(-)</div><div class="line">   Deleted branch hotfix/bug1 (was aa3ca2e).</div><div class="line">   </div><div class="line">   Summary of actions:</div><div class="line">   - Latest objects have been fetched from &apos;origin&apos;</div><div class="line">   - Hotfix branch has been merged into &apos;master&apos;</div><div class="line">   - The hotfix was tagged &apos;bug1&apos;</div><div class="line">   - Hotfix branch has been back-merged into &apos;develop&apos;</div><div class="line">   - Hotfix branch &apos;hotfix/bug1&apos; has been deleted</div></pre></td></tr></table></figure>
<p>git-flow 会依次切换到 master develop 分支下合并 hotfix/bug1，然后删掉 hotfix/bug1。到此，hotfix 完成。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/25/2016_06_26_4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/25/2016_06_26_4/" itemprop="url">GreenDao 3.0使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-25T09:30:00+08:00">
                2016-06-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GreenDao/" itemprop="url" rel="index">
                    <span itemprop="name">GreenDao</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/06/25/2016_06_26_4/" class="leancloud_visitors" data-flag-title="GreenDao 3.0使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="关于GreenDao"><a href="#关于GreenDao" class="headerlink" title="关于GreenDao"></a>关于GreenDao</h2><p>GreenDao是一个将对象映射到SQLite数据库中的轻量且快速的ORM解决方案<br>详情请看官网<a href="http://greenrobot.org/greendao/" target="_blank" rel="external">GreenDao</a></p>
<ul>
<li><strong>Maximum performance</strong> (probably the fastest ORM for Android); our benchmarks are open sourced too</li>
<li><strong>Easy to use</strong> powerful APIs covering relations and joins</li>
<li><strong>Minimal</strong> memory consumption</li>
<li><strong>Small</strong> library size (&lt;100KB) to keep your build times low and to avoid the 65k method limit</li>
<li><strong>Database encryption</strong> greenDAO supports SQLCipher to keep your user’s data safe</li>
<li><strong>Strong community</strong> More than 5.000 GitHub stars show there is a strong and active community</li>
</ul>
<p><em>为什么写英文，因为装逼啊</em></p>
<h2 id="GreenDao-3-0使用"><a href="#GreenDao-3-0使用" class="headerlink" title="GreenDao 3.0使用"></a>GreenDao 3.0使用</h2><p>GreenDao 3.0采用注解的方式来定义实体类，通过gradle插件生成相应的代码。 <del>比3.0-的版本便捷了不知道多少倍</del></p>
<h3 id="在as中导入相关的包"><a href="#在as中导入相关的包" class="headerlink" title="在as中导入相关的包"></a>在as中导入相关的包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">compile&apos;org.greenrobot:greendao:3.0.1&apos;</div><div class="line">compile&apos;org.greenrobot:greendao-generator:3.0.0&apos;</div></pre></td></tr></table></figure>
<h3 id="在项目build-gradle中进行配置："><a href="#在项目build-gradle中进行配置：" class="headerlink" title="在项目build.gradle中进行配置："></a>在项目build.gradle中进行配置：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">apply plugin: &apos;org.greenrobot.greendao&apos;</div><div class="line">buildscript &#123; </div><div class="line">    repositories &#123; </div><div class="line">        mavenCentral()    </div><div class="line">&#125;    </div><div class="line">dependencies &#123;</div><div class="line">    classpath &apos;org.greenrobot:greendao-gradle-plugin:3.0.0&apos;    </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="选择生成的文件路径"><a href="#选择生成的文件路径" class="headerlink" title="选择生成的文件路径"></a>选择生成的文件路径</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">android &#123;</div><div class="line">    greendao&#123;</div><div class="line">        schemaVersion 4</div><div class="line">        daoPackage &apos;com.boxfish.stu.greendaodemo.gen&apos;</div><div class="line">        targetGenDir &apos;src/main/java&apos;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">dependencies&#123;</div><div class="line">        compile&apos;org.greenrobot:greendao:3.0.1&apos;</div><div class="line">        compile&apos;org.greenrobot:greendao-generator:3.0.0&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在gradle的根模块中加入上述代码，就完成了我们的基本配置了。<br>属性介绍：</p>
<ul>
<li>schemaVersion–&gt; 指定数据库schema版本号，迁移等操作会用到;</li>
<li>daoPackage –&gt; dao的包名，包名默认是entity所在的包；</li>
<li>targetGenDir –&gt; 生成数据库文件的目录;<h3 id="创建一个实体类"><a href="#创建一个实体类" class="headerlink" title="创建一个实体类"></a>创建一个实体类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@Entity</div><div class="line">public class User &#123;</div><div class="line">    @Id </div><div class="line">    private Long id; </div><div class="line">    private String name; </div><div class="line">    @Transient </div><div class="line">    private int tempUsageCount; // not persisted  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="MakeProject"><a href="#MakeProject" class="headerlink" title="MakeProject"></a>MakeProject</h3><p>编译项目</p>
<h3 id="GreenDao-初始化"><a href="#GreenDao-初始化" class="headerlink" title="GreenDao 初始化"></a>GreenDao 初始化</h3><p>新建一个Application 进行歌瑞应道的初始化<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">public class MyApplication extends Application &#123;</div><div class="line"> private DaoMaster.DevOpenHelper mHelper;</div><div class="line"> private SQLiteDatabase db;</div><div class="line"> private DaoMaster mDaoMaster;</div><div class="line"> private DaoSession mDaoSession;</div><div class="line"> public static MyApplication instances;</div><div class="line"> @Override    public void onCreate() &#123;</div><div class="line">     super.onCreate();</div><div class="line">     instances = this;</div><div class="line">     setDatabase();</div><div class="line"> &#125;</div><div class="line"> public static MyApplication getInstances()&#123;</div><div class="line">     return instances;</div><div class="line"> &#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 设置greenDao</div><div class="line"> */</div><div class="line">private void setDatabase() &#123;</div><div class="line">    // 通过 DaoMaster 的内部类 DevOpenHelper，你可以得到一个便利的 SQLiteOpenHelper 对象。</div><div class="line">    // 可能你已经注意到了，你并不需要去编写「CREATE TABLE」这样的 SQL 语句，因为 greenDAO 已经帮你做了。</div><div class="line">    // 注意：默认的 DaoMaster.DevOpenHelper 会在数据库升级时，删除所有的表，意味着这将导致数据的丢失。</div><div class="line">    // 所以，在正式的项目中，你还应该做一层封装，来实现数据库的安全升级。</div><div class="line">    mHelper = new DaoMaster.DevOpenHelper(this, &quot;notes-db&quot;, null);</div><div class="line">    db = mHelper.getWritableDatabase();</div><div class="line">    // 注意：该数据库连接属于 DaoMaster，所以多个 Session 指的是相同的数据库连接。 </div><div class="line">    mDaoMaster = new DaoMaster(db); </div><div class="line">    mDaoSession = mDaoMaster.newSession();</div><div class="line">&#125;</div><div class="line">public DaoSession getDaoSession() &#123;</div><div class="line">      return mDaoSession;</div><div class="line">&#125;</div><div class="line">public SQLiteDatabase getDb() &#123;</div><div class="line">      return db;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在想操作的地方获取 UserDao对象</p>
<h3 id="简单的增删改查"><a href="#简单的增删改查" class="headerlink" title="简单的增删改查"></a>简单的增删改查</h3><h4 id="增"><a href="#增" class="headerlink" title="增"></a>增</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mUser = new User((long)2,&quot;anye3&quot;);</div><div class="line">mUserDao.insert(mUser);//添加一个</div></pre></td></tr></table></figure>
<h4 id="删"><a href="#删" class="headerlink" title="删"></a>删</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mUserDao.deleteByKey(id);</div></pre></td></tr></table></figure>
<h4 id="改"><a href="#改" class="headerlink" title="改"></a>改</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mUser = new User((long)2,&quot;anye0803&quot;);</div><div class="line">mUserDao.update(mUser);</div></pre></td></tr></table></figure>
<h4 id="查"><a href="#查" class="headerlink" title="查"></a>查</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">List&lt;User&gt; users = mUserDao.loadAll();</div><div class="line">String userName = &quot;&quot;;</div><div class="line">for (int i = 0; i &lt; users.size(); i++) &#123;</div><div class="line">    userName += users.get(i).getName()+&quot;,&quot;;</div><div class="line">&#125;</div><div class="line">mContext.setText(&quot;查询全部数据==&gt;&quot;+userName);</div></pre></td></tr></table></figure>
<h3 id="greendao中的注解"><a href="#greendao中的注解" class="headerlink" title="greendao中的注解"></a>greendao中的注解</h3><ul>
<li>@Entity 定义实体<br>@nameInDb 在数据库中的名字，如不写则为实体中类名<br>@indexes 索引<br>@createInDb 是否创建表，默认为true,false时不创建<br>@schema 指定架构名称为实体<br>@active 无论是更新生成都刷新</li>
<li>@Id</li>
<li>@NotNull 不为null</li>
<li>@Unique 唯一约束</li>
<li>@ToMany 一对多</li>
<li>@OrderBy 排序</li>
<li>@ToOne 一对一</li>
<li>@Transient 不存储在数据库中</li>
<li>@generated 由greendao产生的构造函数或方法</li>
</ul>
<h2 id="Happy-Ending"><a href="#Happy-Ending" class="headerlink" title="Happy Ending"></a>Happy Ending</h2><p>本文主要讲了基本用法，大家都懂。<br>下一章 则讲述怎么更新数据库的时候，保持老版本的数据的保存</p>
<p>本章特别鸣谢[anye0803]对本文对大力支持</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/02/2016_05_02_3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/02/2016_05_02_3/" itemprop="url">Retrofit2.0 + OkHttp3.0的配置使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-02T14:30:00+08:00">
                2016-05-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Retrofit/" itemprop="url" rel="index">
                    <span itemprop="name">Retrofit</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/05/02/2016_05_02_3/" class="leancloud_visitors" data-flag-title="Retrofit2.0 + OkHttp3.0的配置使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>  现在主流网络框架很多，但是个人觉得最好用的是Retrofit, 现在本公司用的也是Retrofit2.0 + OkHttp3.0<br>  接下来就讲一下怎么使用配置</p>
<h2 id="SetUp"><a href="#SetUp" class="headerlink" title="SetUp"></a>SetUp</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">compile &apos;com.squareup.okhttp3:okhttp:3.1.2&apos;</div><div class="line">compile &apos;com.squareup.okhttp3:okhttp-urlconnection:3.1.2&apos;</div><div class="line">compile &apos;com.squareup.okhttp3:logging-interceptor:3.1.2&apos;</div><div class="line">compile &apos;com.squareup.retrofit2:retrofit:2.0.0&apos;</div><div class="line">compile &apos;com.squareup.retrofit2:adapter-rxjava:2.0.0&apos;</div><div class="line">compile &apos;com.squareup.retrofit2:converter-gson:2.0.0&apos;</div></pre></td></tr></table></figure>
<h2 id="OkHttp"><a href="#OkHttp" class="headerlink" title="OkHttp"></a>OkHttp</h2><p>   先说OkHttp的配置， 3.0使用上的改变主要是 okHttp 对象直接各种 set 进行配置改为 Builder 配置模式，所以原本对应的方法应该到 OkHttpClient.Builder 类对象下寻找。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">HttpLoggingInterceptor interceptor = new HttpLoggingInterceptor();</div><div class="line">           interceptor.setLevel(HttpLoggingInterceptor.Level.BODY);</div><div class="line">           OkHttpClient client = new OkHttpClient.Builder()</div><div class="line">                   .addInterceptor(interceptor)</div><div class="line">                   .retryOnConnectionFailure(true)</div><div class="line">                   .connectTimeout(15, TimeUnit.SECONDS)</div><div class="line">                   .addNetworkInterceptor(mTokenInterceptor)</div><div class="line">                   .build();</div></pre></td></tr></table></figure>
<p>讲解下：</p>
<ul>
<li><p>HttpLoggingInterceptor 是一个拦截器，用于输出网络请求和结果的 Log，可以配置 level 为 BASIC / HEADERS / BODY，<br>都很好理解，对应的是原来 retrofit 的 set log level 方法，现在 retrofit 已经没有这个方法了，所以只能到 OkHttp 这边来配置，<br>并且 BODY 对应原来到 FULL.</p>
</li>
<li><p>retryOnConnectionFailure 方法为设置出现错误进行重新连接。</p>
</li>
<li><p>connectTimeout 设置超时时间</p>
</li>
<li><p><del>addNetworkInterceptor 让所有网络请求都附上你的拦截器，我这里设置了一个 token 拦截器，就是在所有网络请求的 header 加上 token 参数，下面会稍微讲一下这个内容。</del> （目前我没有使用）</p>
</li>
</ul>
<h2 id="Retrofit"><a href="#Retrofit" class="headerlink" title="Retrofit"></a>Retrofit</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Retrofit retrofit = new Retrofit.Builder()</div><div class="line">        .baseUrl(AppConfig.BASE_URL)</div><div class="line">        .client(client)</div><div class="line">        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())</div><div class="line">        .addConverterFactory(GsonConverterFactory.create(gson))</div><div class="line">        .build();</div><div class="line">service = retrofit.create(HttpApi.class);</div></pre></td></tr></table></figure>
<p>讲解下：</p>
<ul>
<li><p>baseUrl: 原来的 setEndPoint 方法变成了 baseUrl</p>
</li>
<li><p>client 即上面的 OkHttp3 对象</p>
</li>
<li><p>addCallAdapterFactory 增加 RxJava 适配器 ,可以和rxjava一起使用，炒鸡方便</p>
</li>
<li><p>addConverterFactory 增加 Gson 转换器， 把数据流转成bean类</p>
</li>
</ul>
<h2 id="HttpApi的书写"><a href="#HttpApi的书写" class="headerlink" title="HttpApi的书写"></a>HttpApi的书写</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public interface HttpApi &#123;</div><div class="line">   @GET(&quot;users/&#123;user&#125;/repos&quot;)</div><div class="line">   Call&lt;List&lt;Repo&gt;&gt; listRepos(@Path(&quot;user&quot;) String user);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>The Retrofit class generates an implementation of the GitHubService interface.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Retrofit retrofit = new Retrofit.Builder()</div><div class="line">    .baseUrl(&quot;https://api.github.com/&quot;)</div><div class="line">    .build();</div><div class="line"></div><div class="line">GitHubService service = retrofit.create(GitHubService.class);</div></pre></td></tr></table></figure>
<p><strong>Each Call from the created GitHubService can make a synchronous or asynchronous HTTP request to the remote webserver.</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Call&lt;List&lt;Repo&gt;&gt; repos = service.listRepos(&quot;octocat&quot;);</div></pre></td></tr></table></figure></p>
<p>参考资料&amp;感谢</p>
<ul>
<li><a href="http://drakeet.me/retrofit-2-0-okhttp-3-0-config/" target="_blank" rel="external">drakeet</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/04/05/2016_05_04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/05/2016_05_04/" itemprop="url">Hexo搭建一个属于自己的私人博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-05T17:01:00+08:00">
                2016-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2016/04/05/2016_05_04/" class="leancloud_visitors" data-flag-title="Hexo搭建一个属于自己的私人博客">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一直想搞一下私人博客，写点东西。<br>今天花了一下午学习了一下Hexo 搭建网站，记录下过程</p>
<h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><h3 id="下载Node"><a href="#下载Node" class="headerlink" title="下载Node"></a>下载Node</h3><p> 使用brew<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$  brew install node</div></pre></td></tr></table></figure></p>
<p> PS (Windows同学绕道去官网下载<a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a>）</p>
<h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install node</div></pre></td></tr></table></figure>
<h3 id="安装最重要的Hexo"><a href="#安装最重要的Hexo" class="headerlink" title="安装最重要的Hexo"></a>安装最重要的Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo npm install -g hexo</div></pre></td></tr></table></figure>
<h2 id="初始化工程"><a href="#初始化工程" class="headerlink" title="初始化工程"></a>初始化工程</h2><h3 id="初始化文件"><a href="#初始化文件" class="headerlink" title="初始化文件"></a>初始化文件</h3><p>环境配置好后，创建一个文件夹，比如shaoweiBlog。 进入shaoweiBlog 执行命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo init</div></pre></td></tr></table></figure></p>
<h3 id="生成静态页面"><a href="#生成静态页面" class="headerlink" title="生成静态页面"></a>生成静态页面</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate （hexo g  也可以）</div></pre></td></tr></table></figure>
<h3 id="本地启动"><a href="#本地启动" class="headerlink" title="本地启动"></a>本地启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo serve （同理 hexo s）</div></pre></td></tr></table></figure>
<p>本地服务起来后， 可以访问localhost:4000 去查看一下</p>
<h2 id="关联github仓库"><a href="#关联github仓库" class="headerlink" title="关联github仓库"></a>关联github仓库</h2><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><p>仓库名必须为【your_user_name.github.io】，固定写法<br>然后在_config.yml中修改配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ deploy:</div><div class="line">$    type: git</div><div class="line">$    repository: https://github.com/leopardpan/leopardpan.github.io.git</div><div class="line">$    branch: master</div></pre></td></tr></table></figure>
<p>执行如下命令才能使用git部署</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p>上传到github （对git一系列 add commit push）做了封装 给个赞<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure></p>
<h3 id="未来修改博客步骤"><a href="#未来修改博客步骤" class="headerlink" title="未来修改博客步骤"></a>未来修改博客步骤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">修改博客</div><div class="line">hexo clean</div><div class="line">hexo generate</div><div class="line">hexo deploy</div></pre></td></tr></table></figure>
<h3 id="一些常用命令"><a href="#一些常用命令" class="headerlink" title="一些常用命令"></a>一些常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">hexo new <span class="string">"postName"</span> <span class="comment">#新建文章</span></div><div class="line">hexo new page <span class="string">"pageName"</span> <span class="comment">#新建页面</span></div><div class="line">hexo generate <span class="comment">#生成静态页面至public目录</span></div><div class="line">hexo server <span class="comment">#开启预览访问端口（默认端口4000，'ctrl + c'关闭server）</span></div><div class="line">hexo deploy <span class="comment">#将.deploy目录部署到GitHub</span></div><div class="line">hexo <span class="built_in">help</span>  <span class="comment">#查看帮助</span></div><div class="line">hexo version  <span class="comment">#查看Hexo的版本</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/02/markdown_study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lishaowei">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/headicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lishaowei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/02/markdown_study/" itemprop="url">Mark Down 学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-03-02T10:48:00+08:00">
                2016-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2016/03/02/markdown_study/" class="leancloud_visitors" data-flag-title="Mark Down 学习">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近写博客，免不了好好学习一下mark down，这里就整理下学习笔记</p>
<p>#一级标签</p>
<p>##二级标签</p>
<p>###三级标签</p>
<p>#分段</p>
<p>第一行<br>相邻被视为同一段落</p>
<p>第一行</p>
<p>两行之间存在空行，才视为不同段落</p>
<p>#字体</p>
<p><em>倾斜</em></p>
<p><strong>粗体</strong></p>
<p><del>删除线</del></p>
<blockquote>
<p>印用</p>
</blockquote>
<p>#网页和图片🔗</p>
<p><a href="http://www.eason-li.cn" target="_blank" rel="external">lishaowei</a><br><img src="http://cdn.lizhi.fm/radio_cover/2014/06/30/12640325514277380.jpg" alt="lishaowei"></p>
<p>#列表</p>
<ul>
<li>项目</li>
<li>项目</li>
<li>项目<ul>
<li>子项目</li>
<li>子项目</li>
</ul>
</li>
<li>项目</li>
</ul>
<p>#代码</p>
<p>##行内代码<br>一句话<code>行内代码</code>一句话。</p>
<p>##多行代码<br>​<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 我是注释</span></div><div class="line"><span class="keyword">int</span> a = <span class="number">5</span>;</div><div class="line">​</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/headicon.jpg"
               alt="lishaowei" />
          <p class="site-author-name" itemprop="name">lishaowei</p>
           
              <p class="site-description motion-element" itemprop="description">Now or Never</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chrisLeeCreate" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.weibo.com/u/2434263314" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.lieeber.com/" title="K神" target="_blank">K神</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lishaowei</span>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "05176ca3ed704b9c8ac21f2d42ae520a",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  










  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("vNTj3JoEA3t83f9ruYAnrVV5-gzGzoHsz", "MtcjjSwYWHe5cW4y2DDGWi3o");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

</body>
</html>
